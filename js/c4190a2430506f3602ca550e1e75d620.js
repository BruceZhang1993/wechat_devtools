'use strict';!function(require,directRequire){const a=require('./822bc5aa1823c9aa222d9ffad72e7f17.js'),b=require('./f0b1e76146041102932a0ff6c1247619.js'),c=require('./df6d0ff021a69fb541c733de4dbba0fe.js'),d=require('./common/locales/index.js'),e=require('./15ba1827c7f6564a45df6bd44da3a977.js'),f=require('./0b01a3ff1572567a994a0ceae64dfef3.js'),g=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),h=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js');module.exports={showDevtools:function(b){return{type:a.WEBDEBUGGER_SHOW_DEVTOOLS,webview:b}},setUrl:function(b){return{type:a.WEBDEBUGGER_SET_URL,url:b}},getA8Key:function(e){return(f)=>{b(e).then((b)=>{let g=b.baseresponse||{},i=g.errcode;if(i==c.NOT_LIMITS||i==c.NOT_LIMITS_QY){let b=h.parseCgiErrorCode(i,g.errmsg);return void f({type:a.WEBDEBUGGER_SET_CONFIRM,data:{show:!0,confirmText:'\u67E5\u770B\u6587\u6863',content:b,callback:(a)=>{a&&nw.Shell.openExternal('https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1455784140')}}})}f({type:a.WEBDEBUGGER_SET_PURVIEW,data:{purviewFormGetA8key:b.purviewFormGetA8key}});let j=b.resp_url;if(e.isSync||b.force_redirect||i==c.ILLEGAL_URL)return f({type:a.WEBDEBUGGER_SET_URL,url:j,from:e.from}),void f({type:a.WEBDEBUGGER_SET_ACT,data:'load'});let k=/\#wechat_redirect$/.test(e.url);if(k&&e.url.replace(/\#wechat_redirect$/,'')===j)return j=j.replace(/\#wechat_redirect/,''),void f({type:a.WEBDEBUGGER_SET_CONFIRM,data:{show:!0,showCancel:!1,content:d.config.CGI_ERR_OAUTH_NOT_SUPPORT}})}).catch((b)=>{f({type:a.WEBDEBUGGER_SET_CONFIRM,data:{show:!0,showCancel:!1,content:b}})})}},setAutoComplete:function(b){return{type:a.WEBDEBUGGER_SET_AUTOCOMPLETE,url:b}},setActions:function(b){return{type:a.WEBDEBUGGER_SET_ACT,data:b}},setFooter:function(b){return{type:a.WEBDEBUGGER_SET_FOOTER,data:b}},setShare:function(b){return{type:a.WEBDEBUGGER_SET_SHARE,data:b}},setJssdkCallback:function(b){return{type:a.WEBDEBUGGER_SET_JSSDKCALLBACK,data:b}},hideCardView:function({callbackID:b,res:c,runtimeID:d}){return(e)=>{e({type:a.WEBDEBUGGER_SET_CARD_VIEW,data:{show:'none',cardInfo:[]}}),b&&e({type:a.WEBDEBUGGER_SET_JSSDKCALLBACK,data:{callbackID:b,runtimeID:d,res:c}})}},batchAddCard:function({callbackID:b,list:c,runtimeID:d}){return(h)=>{const i=g.getState(),j=i.webdebugger||{},k=j.cardInfo||{},l=k.appid;let m={url:`${f.batchAddCardURL}?isapp=1`,body:JSON.stringify({appid:l,acceptitem_list:c}),method:'post',needToken:1};e(m).then((e)=>{let f=e.body,g=f.resp_list;g=g.map((a,b)=>{let d=c[b],e=JSON.parse(a.json_ret);return{cardId:d.card_id,cartExt:d.card_ext,code:e.encrypt_code,isSuccess:!0}}),h({type:a.WEBDEBUGGER_SET_JSSDKCALLBACK,data:{callbackID:b,runtimeID:d,res:{errMsg:`addCard:ok`,cardList:g}}})}).catch((c)=>{h({type:a.WEBDEBUGGER_SET_JSSDKCALLBACK,data:{callbackID:b,runtimeID:d,res:{errMsg:`addCard:fail ${c}`}}})}),h({type:a.WEBDEBUGGER_SET_CARD_VIEW,data:{show:'none',cardInfo:[]}})}},clearAutoComplete:function(){return{type:a.WEBDEBUGGER_CLEAR_AUTOCOMPLETE}},setClickkey:function(b){return(c)=>{c({type:a.TOOLBAR_TOGGLE_CLICKKEY,clickKey:b}),c({type:a.WEBDEBUGGER_SET_CLICKKEY,data:b})}},setLeftBtn:function(b){return{type:a.WEBDEBUGGER_SET_LEFTBTN,data:b}},setTitle:function(b){return{type:a.WEBDEBUGGER_SET_TITLE,data:b}},setUrlComplete:function(b){return{type:a.WEBDEBUGGER_SET_URLCOMPLETE,data:b}},setConfirm:function(b){return{type:a.WEBDEBUGGER_SET_CONFIRM,data:b}},getWeappA8Key:function(e){return(f)=>{e.isWeapp=!0,b(e).then((b)=>{let g=b.baseresponse||{},i=g.errcode;if(i==c.NOT_LIMITS||i==c.NOT_LIMITS_QY){let b=h.parseCgiErrorCode(i,g.errmsg);return void f({type:a.INFO_SET_CONFIRM,data:{show:!0,confirmText:'\u67E5\u770B\u6587\u6863',content:`${b}, url: ${e.url}`,callback:(a)=>{a&&nw.Shell.openExternal('https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1455784140')}}})}f({type:a.WEBDEBUGGER_SET_PURVIEW,data:{purviewFormGetA8key:b.purviewFormGetA8key}});let j=b.resp_url;if(e.isSync||b.force_redirect||i==c.ILLEGAL_URL)return f({type:a.WEBDEBUGGER_SET_URL,url:j}),void f({type:a.SIMULATOR_UPDATE_HTMLWEBVIEW,data:{htmlId:e.htmlId,webviewID:e.webviewID,forceRedirect:b.force_redirect||i==c.ILLEGAL_URL,src:j}});let k=/\#wechat_redirect$/.test(e.url);if(k&&e.url.replace(/\#wechat_redirect$/,'')===j)return j=j.replace(/\#wechat_redirect/,''),void f({type:a.INFO_SET_CONFIRM,data:{show:!0,showCancel:!1,content:d.config.CGI_ERR_OAUTH_NOT_SUPPORT}})}).catch((b)=>{f({type:a.INFO_SET_CONFIRM,data:{show:!0,showCancel:!1,content:b}})})}}}}(require('lazyload'),require);