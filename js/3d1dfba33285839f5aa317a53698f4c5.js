'use strict';!function(require,directRequire){function a(a){let b=g.createHash('md5');return b.update(a).digest('hex')}const b=require('fs'),c=require('path'),d=require('mkdir-p'),e=require('babel-core'),f=require('uglify-js'),g=require('crypto'),h=require('./162bf2ee28b76d3b3d95b685cede4146.js'),i=require('babel-code-frame'),{bufToUTF8:j}=require('./efc820e1b92d6e4063535296d4a24213.js'),{FILE_NOT_UTF8:k,BABEL_TRANS_JS_ERR:l,UGLIFY_JS_ERR:m,BABILI_JS_ERR:n}=require('./949d8235c744ced2a80121e4dba34c28.js');var o={};module.exports=function(g,p={}){o[g.hash]||(o[g.hash]={});let q=o[g.hash];return new Promise(async(r,s)=>{let{es6:u,minified:v}=g.setting,{distPath:w}=p,x=await h(g),y=x.getAllJSFiles();for(let h=0,p=y.length;h<p;h++){let p=y[h],r=x.getFile(p,null),z=j(r);if(void 0===z){let a=new Error(p);return a.code=k,s(a)}let A=Date.now(),t=a(z),B=`${p}_${u}_${v}`;if(q[B]&&q[B].md5===t)z=q[B].jsCode;else if(u||v){if(u){try{let a=e.transform(z,{presets:['es2015','stage-0'],babelrc:!1});z=a.code}catch(a){let b=`file: ${p}\n ${a.message}\n ${i(z,a.loc.line,0<a.loc.column?a.loc.column:1)}`,c=new Error(b);return c.code=l,s(c)}if(v){let a=f.minify(z,{toplevel:!0});if(a.error){let b=`file: ${p}\n ${a.error.message}\n ${i(z,a.error.line,0<a.error.col?a.error.col:1)}`,c=new Error(b);return c.code=m,s(c)}z=a.code}}else try{let a=e.transform(`(function(){\n ${z} \n})()`,{presets:['minify'],babelrc:!1});z=a.code}catch(a){let b=`file: ${p}\n ${a.message}\n ${i(z,a.loc.line,0<a.loc.column?a.loc.column:1)}`,c=new Error(b);return c.code=n,s(c)}o[g.hash][`${p}_${u}_${v}`]={md5:t,jsCode:z}}console.log(`${p} compilejs cost time: ${Date.now()-A}`);let C=c.join(w,p),D=c.dirname(C);d.sync(D),b.writeFileSync(C,z)}r()})}}(require('lazyload'),require);